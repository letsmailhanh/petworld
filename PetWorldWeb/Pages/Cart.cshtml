@page
@model PetWorldWeb.Pages.CartModel
@{
	ViewData["Title"] = "Cart";
}
<h3>Cart</h3>

@if (Model.Cart.Count != 0)
{
    @foreach(string str in Model.Cart)
	{
		<p>@str</p>
	}
	<form method="post" asp-page="cart" asp-page-handler="update">
		<table border="1">
			<tr>
				<th>Action</th>
				<th>Id</th>
				<th>Name</th>
				<th>Photo</th>
				<th>Price</th>
				<th>Quantity <a class="btn" asp-page-handler="Update" asp-route-id="1" asp-route-quantity="1">Update</a></th>
				<th>Sub Total</th>
			</tr>

			@foreach (var item in Model.CartItems)
			{
				<tr align="center">
					<td align="center">
						<a asp-page="cart" asp-page-handler="delete" asp-route-id="@item.Product.ProductId">X</a>
					</td>
					<td>@item.Product.ProductId</td>
					<td>@item.Product.ProductName</td>
					<td><img src="@item.Product.Image" width="120" height="100" /></td>
					<td>@((int)item.Product.Price)</td>
					@if (item.Product.IsPet)
					{
						<td><input type="number" name="quantities" value="@item.Quantity" min="1" style="width: 50px;" /></td>
					}
					<td>
						@((int)(item.Product.Price * item.Quantity)) ₫
					</td>
				</tr>
			}
			<tr>
				<td colspan="6" align="right">Total</td>
				<td align="center">@((int)Model.Total) ₫</td>
			</tr>
		</table>
	</form>
	     <button class="btn-success">Buy Now</button>
}
else
{
	<script type="text/javascript">
		alert("Cart empty");
	</script>
}
<a asp-page="/Products/Index">Continue Shopping</a>